bundle:
  name: databricks-job-executor-app

resources:
  apps:
    databricks_job_executor_app:
      name: dbx-job-executor-app
      description: Streamlit application for executing and monitoring Databricks migration jobs.
      source_code_path: .
      command:
        - bash
        - -c
        - "python -m streamlit run streamlit_app/app.py --server.port=8501 --server.address=0.0.0.0 --server.headless=true --server.enableCORS=false"
      env:
        - name: DATABRICKS_RUNTIME_ENV
          value: "app"
        - name: PYTHONPATH
          value: "/app"
        - name: DATABRICKS_BUNDLE_ENV
          value: ${bundle.environment}
        # Add other environment variables here if needed, e.g., for LLM or database config
        # - name: DATABRICKS_ENDPOINT
        #   value: "databricks-llama-4-maverick"
        # - name: DATABRICKS_TEMPERATURE
        #   value: "0.1"
        # - name: DATABRICKS_MAX_TOKENS
        #   value: "2000"

targets:
  dev:
    default: true